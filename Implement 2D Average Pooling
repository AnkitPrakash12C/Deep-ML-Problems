def avg_pool_2d(input_matrix: list[list[float]], pool_size: int) -> list[list[float]]:
    """
    Perform 2D average pooling on the input matrix.
    
    Args:
        input_matrix: 2D input array of shape (H, W)
        pool_size: Size of the square pooling window
        
    Returns:
        2D array after average pooling of shape (H//pool_size, W//pool_size)
    """
    H = len(input_matrix)
    W = len(input_matrix[0])

    output = []

    for i in range(0, H, pool_size):
        row = []
        for j in range(0, W, pool_size):
            total = 0.0
            for pi in range(pool_size):
                for pj in range(pool_size):
                    total += input_matrix[i + pi][j + pj]
            row.append(total / (pool_size * pool_size))
        output.append(row)

    return output
